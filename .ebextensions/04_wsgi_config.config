files:
  "/opt/elasticbeanstalk/hooks/appdeploy/pre/01_configure_wsgi.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/bin/bash
      # Ensure the WSGI module can be imported correctly
      cd /var/app/current
      
      # Test if application can be imported
      python3 -c "import application; print('Application module imported successfully')" || {
        echo "Failed to import application module"
        exit 1
      }

commands:
  01_configure_wsgi:
    command: |
      # Make sure application.py is in the correct location and format
      cd /var/app/current
      if [ ! -f "application.py" ]; then
        echo "Error: application.py not found"
        exit 1
      fi
      echo "WSGI file found and ready"
