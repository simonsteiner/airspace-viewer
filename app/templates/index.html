<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ title }}</title>
  {% include '_html_head.html' %}
</head>

<body>
  <div id="wrapper">
    <!-- Header -->
    {% include '_header.html' %}

    <!-- Flash messages -->
    {% include '_flash_messages.html' %}

    <!-- Map container -->
    <div id="map"></div>

    <!-- Drag and drop overlay -->
    <div id="dropzone">
      <div>
        <i class="bi bi-cloud-upload" style="font-size: 48px; margin-bottom: 20px"></i>
        <div>Drop your OpenAir file here.</div>
        <div style="font-size: 16px; margin-top: 10px; opacity: 0.8">
          Supported formats: .txt, .air, .openair
        </div>
      </div>
    </div>

    <!-- Control panel -->
    {% include '_control_panel.html' %}

    <!-- File info display -->
    {% include '_file_info_display.html' %}

    <!-- Airspace info panel (hidden by default) -->
    <div id="airspaceinfo" class="hidden">
      <div class="name airspace-name"></div>
      <div class="class"></div>
      <div class="bounds airspace-bounds"></div>
    </div>

    <!-- Legend -->
    {% include '_legend.html' %}

    <!-- Example file menu -->
    <div id="example-menu" class="minimized">
      <div class="example-header" onclick="toggleExampleMenu()">
        <span>üìÅ Load Example Airspace File</span>
        <button class="toggle-btn" id="exampleToggleBtn">‚ñ≤</button>
      </div>
      <div class="example-content" id="exampleContent">
        <label for="example-select">Choose file:</label>
        <select id="example-select" data-current-file="{{ current_file|e }}"></select>
        <button id="load-example-btn" class="btn btn-primary btn-sm">Load</button>
      </div>
    </div>

  </div>
  {% include '_footer.html' %}

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script src="{{ url_for('main.js_config') }}"></script>
  <script src="{{ url_for('static', filename='js/map.js') }}"></script>
  <script src="{{ url_for('static', filename='js/airspace.js') }}"></script>
  <script src="{{ url_for('static', filename='js/drag_and_drop.js') }}"></script>
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  <script src="{{ url_for('static', filename='js/example_menu.js') }}"></script>
  <script src="{{ url_for('static', filename='js/example_file_loader.js') }}"></script>
</body>

</html>